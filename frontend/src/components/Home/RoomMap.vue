<template>
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440.19 409.01">
    <defs>
      <pattern
        id="a_part"
        patternUnits="userSpaceOnUse"
        width="30"
        height="30"
        patternTransform="rotate(45)"
      >
        <rect x="0" y="0" width="79" height="67" fill="#ffefd3" />
        <line x1="0" y="0" x2="0" y2="30" stroke="#B7E1CD" stroke-width="25" />
      </pattern>
      <pattern
        id="b_part"
        patternUnits="userSpaceOnUse"
        width="30"
        height="30"
        patternTransform="rotate(45)"
      >
        <rect x="0" y="0" width="79" height="67" fill="#fe9900" />
        <line x1="0" y="0" x2="0" y2="30" stroke="#B7E1CD" stroke-width="20" />
      </pattern>
      <pattern
        id="e_part"
        patternUnits="userSpaceOnUse"
        width="30"
        height="30"
        patternTransform="rotate(45)"
      >
        <rect x="0" y="0" width="79" height="67" fill="#f3f3f3" />
        <line x1="0" y="0" x2="0" y2="30" stroke="#B7E1CD" stroke-width="20" />
      </pattern>
    </defs>
    <title>LEMAC-planta</title>
    <g>
      <rect ref="69" class="a" x="0.38" y="0.51" width="79" height="67" />
      <text class="b" transform="translate(14.05 40.01)">LTI - 69</text>
      <rect ref="66" class="a" x="80.38" y="0.51" width="79" height="67" />
      <text class="b" transform="translate(94.05 40.01)">LTI - 66</text>
      <rect ref="68" class="a" x="0.38" y="68.01" width="79" height="67" />
      <text class="b" transform="translate(14.05 107.01)">LTI - 68</text>
      <rect ref="67" class="a" x="80.38" y="68.01" width="79" height="67" />
      <text class="b" transform="translate(94.05 107.01)">LTI - 67</text>
      <rect x="77.87" y="0.01" width="4" height="136" />
    </g>
    <g>
      <rect ref="65" class="a" x="240.38" y="0.51" width="79" height="67" />
      <text class="b" transform="translate(254.05 40.01)">LTI - 65</text>
      <rect ref="62" class="d" x="320.38" y="0.51" width="79" height="67" />
      <text class="b" transform="translate(334.05 40.01)">LTI - 62</text>
      <rect ref="64" class="a" x="240.38" y="68.01" width="79" height="67" />
      <text class="b" transform="translate(254.05 107.01)">LTI - 64</text>
      <rect ref="63" class="d" x="320.38" y="68.01" width="79" height="67" />
      <text class="b" transform="translate(334.05 107.01)">LTI - 63</text>
      <rect x="317.87" y="0.01" width="4" height="136" />
    </g>
    <g>
      <rect ref="61" class="a" x="480.38" y="0.51" width="79" height="67" />
      <text class="b" transform="translate(494.05 40.01)">LTI - 61</text>
      <rect ref="58" class="a" x="560.38" y="0.51" width="79" height="67" />
      <text class="b" transform="translate(574.05 40.01)">LTI - 58</text>
      <rect ref="60" class="d" x="480.38" y="68.01" width="79" height="67" />
      <text class="b" transform="translate(494.05 107.01)">LTI - 60</text>
      <rect ref="59" class="a" x="560.38" y="68.01" width="79" height="67" />
      <text class="b" transform="translate(574.05 107.01)">LTI - 59</text>
      <rect x="557.87" y="0.01" width="4" height="136" />
    </g>
    <g>
      <rect ref="57" class="a" x="720.37" y="0.51" width="79" height="67" />
      <text class="b" transform="translate(734.05 40.01)">LTI - 57</text>
      <rect ref="54" class="a" x="800.38" y="0.51" width="79" height="67" />
      <text class="b" transform="translate(814.05 40.01)">LTI - 54</text>
      <rect ref="56" class="a" x="720.37" y="68.01" width="79" height="67" />
      <text class="b" transform="translate(734.05 107.01)">LTI - 56</text>
      <rect ref="55" class="a" x="800.38" y="68.01" width="79" height="67" />
      <text class="b" transform="translate(814.05 107.01)">LTI - 55</text>
      <rect x="797.87" y="0.01" width="4" height="136" />
    </g>
    <g>
      <rect ref="53" class="d" x="960.38" y="0.51" width="79" height="67" />
      <text class="b" transform="translate(974.05 40.01)">LTI - 53</text>
      <rect ref="50" class="a" x="1040.38" y="0.51" width="79" height="67" />
      <text class="b" transform="translate(1054.05 40.01)">LTI - 50</text>
      <rect ref="52" class="d" x="960.38" y="68.01" width="79" height="67" />
      <text class="b" transform="translate(974.05 107.01)">LTI - 52</text>
      <rect ref="51" class="a" x="1040.38" y="68.01" width="79" height="67" />
      <text class="b" transform="translate(1054.05 107.01)">LTI - 51</text>
    </g>
    <g>
      <rect ref="71" class="d" x="0.81" y="272.38" width="79" height="67" />
      <text class="b" transform="translate(14.05 312.01)">LTI - 71</text>
      <rect ref="72" class="a" x="80.81" y="272.38" width="79" height="67" />
      <text class="b" transform="translate(94.05 312.01)">LTI - 72</text>
      <rect ref="70" class="a" x="0.81" y="339.88" width="79" height="67" />
      <text class="b" transform="translate(14.05 379.01)">LTI - 70</text>
      <rect ref="73" class="a" x="80.81" y="339.88" width="79" height="67" />
      <text class="b" transform="translate(94.05 379.01)">LTI - 73</text>
      <rect x="78.31" y="271.88" width="4" height="136" />
    </g>
    <g>
      <rect ref="75" class="a" x="240.81" y="272.38" width="79" height="67" />
      <text class="b" transform="translate(254.05 312.01)">LTI - 75</text>
      <rect ref="76" class="a" x="320.81" y="272.38" width="79" height="67" />
      <text class="b" transform="translate(334.05 312.01)">LTI - 76</text>
      <rect ref="74" class="a" x="240.81" y="339.88" width="79" height="67" />
      <text class="b" transform="translate(254.05 379.01)">LTI - 74</text>
      <rect ref="77" class="a" x="320.81" y="339.88" width="79" height="67" />
      <text class="b" transform="translate(334.05 379.01)">LTI - 77</text>
      <rect x="318.31" y="271.88" width="4" height="136" />
    </g>
    <g>
      <rect ref="45" class="d" x="1280.81" y="272.38" width="79" height="67" />
      <text class="b" transform="translate(1294.05 312.01)">LTI - 45</text>
      <rect ref="43" class="d" x="1360.81" y="272.38" width="79" height="67" />
      <text class="b" transform="translate(1374.05 312.01)">LTI - 43</text>
      <rect ref="46" class="d" x="1280.81" y="339.88" width="79" height="67" />
      <text class="b" transform="translate(1293.05 379.01)">LTI - 46</text>
      <rect ref="44" class="d" x="1360.81" y="339.88" width="79" height="67" />
      <text class="b" transform="translate(1374.05 379.01)">LTI - 44</text>
    </g>
    <g>
      <rect ref="49" class="a" x="1279.81" y="0.38" width="79" height="67" />
      <text class="b" transform="translate(1293.05 40.01)">LTI - 49</text>
      <rect ref="40" class="a" x="1359.81" y="0.38" width="79" height="67" />
      <text class="b" transform="translate(1373.05 40.01)">LTI - 40</text>
      <rect ref="48" class="a" x="1279.81" y="67.88" width="79" height="67" />
      <text class="b" transform="translate(1293.05 107.01)">LTI - 48</text>
      <rect ref="41" class="e" x="1359.81" y="67.88" width="79" height="67" />
      <text class="b" transform="translate(1378.41 107.01)">R - 41</text>
    </g>
    <rect ref="47" class="a" x="1279.87" y="135.01" width="79" height="67" />
    <text class="b" transform="translate(1293.05 175.01)">LTI - 47</text>
    <rect ref="42" class="a" x="1359.87" y="135.01" width="79" height="67" />
    <text class="b" transform="translate(1373.05 175.01)">LTI - 42</text>
    <rect x="1197.38" y="0.01" width="4" height="204" />
    <rect x="1197.38" y="272.51" width="4" height="136" />
    <rect class="f" x="559.38" y="271.51" width="480" height="136" />
    <text class="g" transform="translate(717.74 354.75)">Monitor</text>
  </svg>
</template>

<script>
import { getWorkstations } from '@/api/workstations.api';
export default {
  name: 'RoomMap',
  async mounted() {
    const { data } = await getWorkstations();
    console.log(data);
    data.forEach((x) => {
      if (x.occupation > 0) {
        if (x.occupation == x.capacity) {
          this.$refs[x.name].classList.remove('a');
          this.$refs[x.name].classList.remove('b');
          this.$refs[x.name].classList.remove('e');
          this.$refs[x.name].classList.add('active');
        } else if (this.$refs[x.name].classList.contains('a')) {
          this.$refs[x.name].classList.remove('a');
          this.$refs[x.name].classList.add('a_part');
        } else if (this.$refs[x.name].classList.contains('b')) {
          this.$refs[x.name].classList.remove('b');
          this.$refs[x.name].classList.add('b_part');
        } else if (this.$refs[x.name].classList.contains('e')) {
          this.$refs[x.name].classList.remove('e');
          this.$refs[x.name].classList.add('e_part');
        }
      }
    });
  },
};
</script>

<style>
.a {
  fill: #ffefd3;
}

.a,
.d,
.e {
  stroke: #ada495;
  stroke-width: 0.75px;
}

.a,
.d,
.e,
.f {
  stroke-miterlimit: 10;
}

.b {
  font-size: 18px;
}

.b,
.g {
  font-family: SourceSansPro-Regular, Source Sans Pro;
}

.d {
  fill: #fe9900;
}

.e {
  fill: #f3f3f3;
}

.f {
  fill: #e5e5e5;
  stroke: #a4a4a4;
  stroke-width: 3px;
}

.g {
  font-size: 50px;
}

.a_part {
  fill: url(#a_part);
  stroke: #ada495;
  stroke-width: 0.75px;
}
.b_part {
  fill: url(#b_part);
  stroke: #ada495;
  stroke-width: 0.75px;
}
.e_part {
  fill: url(#e_part);
  stroke: #ada495;
  stroke-width: 0.75px;
}
.active {
  fill: #b7e1cd;
  stroke: #ada495;
  stroke-width: 0.75px;
}
</style>
